(()=>{let e,t,n,o,c=[],l=[],a=[];const d=["rouge","vert","jaune","bleu","blanc","violet"];class s{constructor(e){this.tab=e}test(e){let t=0;for(i=0;i<4;i++)this.tab[i]==e&&(t+=1);return t}}let r=new s(l),u=new s(a);class m{constructor(e){this.id=e}selection(){switch(Math.floor(6*Math.random())+1){case 1:e="<div class='ball rouge'></div>";break;case 2:e="<div class='ball vert'></div>";break;case 3:e="<div class='ball jaune'></div>";break;case 4:e="<div class='ball bleu'></div>";break;case 5:e="<div class='ball blanc'></div>";break;case 6:e="<div class='ball violet'></div>"}document.querySelector("#"+this.id+" > div").remove();const t=document.createElement("div");t.innerHTML=e,document.getElementById(this.id).appendChild(t)}}const f=new m("enigme1"),g=new m("enigme2"),v=new m("enigme3"),y=new m("enigme4");function b(){for(c=[],i=1;i<5;i++)document.getElementById("affichage"+i+"-"+t).classList.add("able"),document.getElementById("final").innerText="Tour\nn° "+t,document.getElementById("final").style.color="#9f653e"}function E(e,t,n){for(i=0;i<4;i++)if(0==c[i])for(j=0;j<4;j++)a[i]==l[j]?B(e,t,n):1!=c[i]&&(c[i]=0)}function B(e,t,n){a[i]==e&&(t>n?(c[i]=0,t-=1):c[i]=1)}function I(e,t){return a[i]==e&&(t-=1),t}function h(e){let t=e;for(j=0;j<6;j++)t.classList.contains(d[j])&&(e=d[j]);return e}function L(){for(i=1;i<5;i++)document.getElementById("enigme"+i).style.opacity=1}document.getElementById("debut").addEventListener("click",(function(){!function(){for(document.getElementById("score").innerText="",document.getElementById("final").innerText="",c=[],i=1;i<13;i++)for(j=1;j<5;j++){document.querySelector("#affichage"+j+"-"+i+" > div").remove();const e=document.createElement("div");document.getElementById("affichage"+j+"-"+i).appendChild(e)}for(i=1;i<13;i++)for(j=1;j<5;j++)document.getElementById("affichageMin"+j+"-"+i).classList.contains("rouge")?document.getElementById("affichageMin"+j+"-"+i).classList.remove("rouge"):document.getElementById("affichageMin"+j+"-"+i).classList.contains("blanc")&&document.getElementById("affichageMin"+j+"-"+i).classList.remove("blanc")}(),function(){for(i=1;i<5;i++)document.getElementById("enigme"+i).style.opacity=0}(),f.selection(),g.selection(),v.selection(),y.selection(),t=1,b()})),document.getElementById("valide").addEventListener("click",(function(e){e.stopPropagation,e.preventDefault,function(){for(i=1;i<5;i++)document.getElementById("affichage"+i+"-"+t).classList.remove("able")}(),function(){for(i=1;i<5;i++)n=document.querySelector("#enigme"+i+" div > div"),n=h(n),o=document.querySelector("#affichage"+i+"-"+t+" > div"),o=h(o),l[i-1]=n,a[i-1]=o;let e=u.test("rouge"),d=r.test("rouge"),s=u.test("vert"),m=r.test("vert"),f=u.test("jaune"),g=r.test("jaune"),v=u.test("bleu"),y=r.test("bleu"),b=u.test("blanc"),j=r.test("blanc"),B=u.test("violet"),L=r.test("violet");for(i=0;i<4;i++)a[i]==l[i]?(c[i]=2,e=I("rouge",e),d=I("rouge",d),s=I("vert",s),m=I("vert",m),f=I("jaune",f),g=I("jaune",g),v=I("bleu",v),y=I("bleu",y),b=I("blanc",b),j=I("blanc",j),B=I("violet",B),L=I("violet",L)):c[i]=0;E("rouge",e,d),E("vert",s,m),E("jaune",f,g),E("bleu",v,y),E("blanc",b,j),E("violet",B,L)}(),function(){for(i=3;i>0;i--){let e=Math.floor(Math.random()*(i+1));[c[i],c[e]]=[c[e],c[i]]}for(i=0;i<4;i++)2==c[i]?document.getElementById("affichageMin"+(i+1)+"-"+t).classList.add("rouge"):1==c[i]&&document.getElementById("affichageMin"+(i+1)+"-"+t).classList.add("blanc")}(),function(){let e=0;for(i=0;i<4;i++)2==c[i]&&(e+=1);4==e?function(){let e=13-t;document.getElementById("score").innerText=e,document.getElementById("final").innerText="GAGNÉ votre score : "+e,document.getElementById("final").style.color="green",L()}():12==t?(document.getElementById("score").innerText="Perdu",document.getElementById("final").innerText="PERDU !!",document.getElementById("final").style.color="red",L()):(t+=1,b())}()}))})();